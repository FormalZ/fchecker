image: haskell:8.0

# Caching so the next build will be fast too.
cache:
  paths:
  - $HOME/.stack
  - $HOME/.stack-work

build:
  script:
    - stack --no-terminal --install-ghc build --only-dependencies

test:
  script:
    # Build dependencies
    - stack --no-terminal --install-ghc test --only-dependencies
    # Build the package, its tests, and its docs and run the tests
    - stack --no-terminal test --haddock --no-haddock-deps
